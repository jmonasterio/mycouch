{"id":"mycouch-052","title":"Test shared tenants and invitation flow","description":"Unit tests: token generation/validation, role checks, authorization. Integration tests: invite creation, email sending, accept flow, single-use enforcement. E2E: create shared tenant, invite user, accept, verify access. Security tests: invalid tokens, expired tokens, email mismatch, timing attacks.","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:35:27.3178835-08:00","updated_at":"2025-12-07T17:35:27.3178835-08:00"}
{"id":"mycouch-1gw","title":"Update user/tenant schema for bands (shared tenants)","description":"Add isPersonal flag, sharedTenantId, ownerId, tenant_user_mapping documents. Only 1 band per user. Invites only to band, not personal tenant. Per prd-shared-tenants-invitations.md","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:35:07.6005029-08:00","updated_at":"2025-12-07T17:36:26.6159348-08:00"}
{"id":"mycouch-1np","title":"Document CouchDB security setup","description":"Create docs/couchdb-security.md covering admin party, HTTPS/TLS, credentials, design docs, security documents, replication.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:22:20.64257-08:00","updated_at":"2025-12-07T17:36:23.6001994-08:00","closed_at":"2025-12-07T17:36:23.6001994-08:00"}
{"id":"mycouch-2ao","title":"Implement authorization/role checks for shared tenants","description":"Add role-based access control: owner, admin, member with appropriate permissions. Implement checks in endpoints per authorization table in prd-shared-tenants-invitations.md. Prevent removing owner, changing owner role.","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:35:20.485924-08:00","updated_at":"2025-12-07T17:35:20.485924-08:00"}
{"id":"mycouch-2be","title":"Add band and invitation API endpoints","description":"Implement endpoints: POST /band (create), GET /band, PUT /band, DELETE /band, POST /band/invitations, GET /band/invitations, DELETE /band/invitations/{id}, POST /band/members/{id}/role, DELETE /band/members/{id}, GET/POST /invitations/preview, /invitations/accept. Include role-based authorization per table in prd.","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:35:14.244829-08:00","updated_at":"2025-12-07T17:36:29.7092124-08:00"}
{"id":"mycouch-3rr","title":"Implement rate limiting on auth endpoints","description":"Add slowapi rate limiting to /my-tenants (30/min) and /choose-tenant (10/min) endpoints. Prevents DoS and brute force attacks.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:22:11.204635-08:00","updated_at":"2025-12-07T16:23:53.5738146-08:00","closed_at":"2025-12-07T16:23:53.5738146-08:00"}
{"id":"mycouch-7dc","title":"Implement invitation service and token handling","description":"Create invite_service.py with secure token generation (sk_ prefix, 256-bit), single-use validation, expiration checks, email verification. Use hmac.compare_digest for timing-attack resistance. Per security-review.md requirements.","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:35:10.761547-08:00","updated_at":"2025-12-07T17:35:10.761547-08:00"}
{"id":"mycouch-cw5","title":"Add session/auth logging and monitoring","description":"Log all auth events (successful/failed), tenant switches, unauthorized access. Alert on suspicious patterns.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:22:15.9548897-08:00","updated_at":"2025-12-07T17:01:04.6405998-08:00","closed_at":"2025-12-07T17:01:04.6405998-08:00"}
{"id":"mycouch-ej8","title":"Add auth logging to couch-sitter-log database","description":"Log all auth requests to new couch-sitter-log CouchDB. Include enough info for searching/reporting: user_id, tenant_id, endpoint, action, status, timestamp, IP. Reuse existing CouchDB connection machinery.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:32:37.53264-08:00","updated_at":"2025-12-07T17:26:29.2008288-08:00","closed_at":"2025-12-07T17:26:29.2008288-08:00"}
{"id":"mycouch-gbu","title":"Build PWA UI for band and invitations","description":"Update Admin PWA: show personal + band in UI, create band form, manage band members/roles, invite users to band, preview invitations before accepting, accept invitation flow. Show only 'band name' not 'shared tenant' concept.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:35:23.6966444-08:00","updated_at":"2025-12-07T17:36:32.5957037-08:00"}
{"id":"mycouch-hz7","title":"Prevent personal tenant deletion","description":"Add validation to prevent deletion of personal tenants. Check tenant.personal flag and tenant.owner_id before allowing deletion.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T16:22:24.9882336-08:00","updated_at":"2025-12-07T17:36:23.6045998-08:00","closed_at":"2025-12-07T17:36:23.6045998-08:00"}
{"id":"mycouch-oob","title":"Add email integration for invitations","description":"Set up email service (SendGrid/Resend/AWS SES). Create email template with invite link. Add env config. Implement email sending on invite creation and resend endpoint.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:35:17.4605162-08:00","updated_at":"2025-12-07T17:35:17.4605162-08:00"}
{"id":"mycouch-rc6","title":"Implement suspicious auth pattern detection and alerting","description":"Detect and alert on suspicious patterns: multiple failed logins from same IP, rapid tenant switches, unusual access patterns, repeated access denied. Use logs collected in couch-sitter-log database to identify and notify on threats.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:01:03.4153828-08:00","updated_at":"2025-12-07T17:36:23.5939081-08:00","closed_at":"2025-12-07T17:36:23.5939081-08:00"}
