{"id":"mycouch-052","title":"Test workspace tenants and invitations","description":"Unit: isPersonal flag enforcement, invitation validation for workspaces only, role checks, token generation/validation, single-use enforcement. Integration: create workspace, invite user, accept, verify membership. E2E: create workspace, invite, accept, verify access. Security: cannot invite to personal, timing attacks, invalid tokens, token reuse.","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:35:27.3178835-08:00","updated_at":"2025-12-07T18:14:18.799552-08:00","dependencies":[{"issue_id":"mycouch-052","depends_on_id":"mycouch-1gw","type":"blocks","created_at":"2025-12-07T18:14:13.9233986-08:00","created_by":"daemon"},{"issue_id":"mycouch-052","depends_on_id":"mycouch-7dc","type":"blocks","created_at":"2025-12-07T18:14:14.7474428-08:00","created_by":"daemon"},{"issue_id":"mycouch-052","depends_on_id":"mycouch-2be","type":"blocks","created_at":"2025-12-07T18:14:15.5813971-08:00","created_by":"daemon"},{"issue_id":"mycouch-052","depends_on_id":"mycouch-2ao","type":"blocks","created_at":"2025-12-07T18:14:16.4032986-08:00","created_by":"daemon"}]}
{"id":"mycouch-1gw","title":"Add workspace tenant support with isPersonal flag","description":"Update tenant schema: add userId (owner), userIds array, metadata.autoCreated. No isPersonal flag needed â€” personal vs workspace distinction tracked in User.tenants[].personal field only. Update couch_sitter_service to auto-create tenant for first login with autoCreated=true.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:35:07.6005029-08:00","updated_at":"2025-12-07T18:17:12.4296355-08:00","closed_at":"2025-12-07T18:17:12.4296355-08:00"}
{"id":"mycouch-1np","title":"Document CouchDB security setup","description":"Create docs/couchdb-security.md covering admin party, HTTPS/TLS, credentials, design docs, security documents, replication.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:22:20.64257-08:00","updated_at":"2025-12-07T17:36:23.6001994-08:00","closed_at":"2025-12-07T17:36:23.6001994-08:00"}
{"id":"mycouch-2ao","title":"Implement authorization checks for tenants and invitations","description":"Universal owner rules: cannot be removed, cannot be downgraded, only owner can delete/change roles. Authorization per PRD table: Owner all actions, Admin updates/invites/remove members (workspace only), Member read+access only. Invitations only on workspace tenants (User.tenants[].personal=false). Check role enforcement at API level.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:35:20.485924-08:00","updated_at":"2025-12-07T18:17:17.3197643-08:00","closed_at":"2025-12-07T18:17:17.3197643-08:00"}
{"id":"mycouch-2be","title":"Add workspace tenant and invitation API endpoints","description":"Add API endpoints: POST /tenants (create workspace), GET /my-tenants (list user's tenants), GET /tenants/{id}, PUT/DELETE /tenants/{id}. Invitations: POST /tenants/{id}/invitations, GET /invitations/preview, POST /invitations/accept, DELETE /tenants/{id}/invitations/{id}, POST /tenants/{id}/invitations/{id}/resend. Member mgmt: PUT/DELETE /tenants/{id}/members/{id}/role. Per prd-shared-tenants-invitations.md","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:35:14.244829-08:00","updated_at":"2025-12-07T18:17:16.3722641-08:00","closed_at":"2025-12-07T18:17:16.3722641-08:00"}
{"id":"mycouch-3rr","title":"Implement rate limiting on auth endpoints","description":"Add slowapi rate limiting to /my-tenants (30/min) and /choose-tenant (10/min) endpoints. Prevents DoS and brute force attacks.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:22:11.204635-08:00","updated_at":"2025-12-07T16:23:53.5738146-08:00","closed_at":"2025-12-07T16:23:53.5738146-08:00"}
{"id":"mycouch-7dc","title":"Implement invitation service and token handling","description":"Create invite_service.py with secure token generation (sk_ prefix, 256-bit), single-use validation, expiration checks (7 days default), email verification matching. Use hmac.compare_digest for timing-attack resistance. Token stored as SHA256 hash.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:35:10.761547-08:00","updated_at":"2025-12-07T18:17:15.7312999-08:00","closed_at":"2025-12-07T18:17:15.7312999-08:00"}
{"id":"mycouch-cw5","title":"Add session/auth logging and monitoring","description":"Log all auth events (successful/failed), tenant switches, unauthorized access. Alert on suspicious patterns.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:22:15.9548897-08:00","updated_at":"2025-12-07T17:01:04.6405998-08:00","closed_at":"2025-12-07T17:01:04.6405998-08:00"}
{"id":"mycouch-ej8","title":"Add auth logging to couch-sitter-log database","description":"Log all auth requests to new couch-sitter-log CouchDB. Include enough info for searching/reporting: user_id, tenant_id, endpoint, action, status, timestamp, IP. Reuse existing CouchDB connection machinery.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T16:32:37.53264-08:00","updated_at":"2025-12-07T17:26:29.2008288-08:00","closed_at":"2025-12-07T17:26:29.2008288-08:00"}
{"id":"mycouch-gbu","title":"Build PWA UI for workspaces and invitations","description":"Show user's personal tenant + workspace tenants in UI. Create workspace tenant form (isPersonal=false). Invite users to workspaces (blocked for personal). Manage members/roles. Accept invitation flow. Preview before accepting. Show only relevant actions based on isPersonal flag and user role.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:35:23.6966444-08:00","updated_at":"2025-12-07T18:00:31.8540727-08:00"}
{"id":"mycouch-hz7","title":"Prevent personal tenant deletion","description":"Add validation to prevent deletion of personal tenants. Check tenant.personal flag and tenant.owner_id before allowing deletion.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T16:22:24.9882336-08:00","updated_at":"2025-12-07T17:36:23.6045998-08:00","closed_at":"2025-12-07T17:36:23.6045998-08:00"}
{"id":"mycouch-oob","title":"Add email integration for invitations","description":"Set up email service (SendGrid/Resend/AWS SES). Create email template with invite link. Add env config. Implement email sending on invite creation and resend endpoint.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-07T17:35:17.4605162-08:00","updated_at":"2025-12-07T17:35:17.4605162-08:00"}
{"id":"mycouch-rc6","title":"Implement suspicious auth pattern detection and alerting","description":"Detect and alert on suspicious patterns: multiple failed logins from same IP, rapid tenant switches, unusual access patterns, repeated access denied. Use logs collected in couch-sitter-log database to identify and notify on threats.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T17:01:03.4153828-08:00","updated_at":"2025-12-07T17:36:23.5939081-08:00","closed_at":"2025-12-07T17:36:23.5939081-08:00"}
